<!DOCTYPE html>
<html lang="en" data-root="https://fsprojects.github.io/fantomas/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Florian Verdonck, Jindřich Ivánek, David Schaefer" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="fantomas">
    <meta property="og:title" content="Fantomas is trying to format the input multiple times due to the detection of multiple defines
" />
    <meta property="og:url" content="https://fsprojects.github.io/fantomas/docs/contributors/Multiple Times.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://fsprojects.github.io/fantomas/">
    <meta name="twitter:title" content="Fantomas is trying to format the input multiple times due to the detection of multiple defines
">
    
    <title>Fantomas is trying to format the input multiple times due to the detection of multiple defines
 | fantomas</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fsprojects.github.io/fantomas/images/favicon.ico" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="https://fsprojects.github.io/fantomas/content/fsdocs-theme-set-dark.js"></script>
    <link href="https://fsprojects.github.io/fantomas/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="https://fsprojects.github.io/fantomas/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,600;1,400&family=Reem+Kufi:wght@400;500;700&display=swap" rel="stylesheet">

    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/fantomas/blob/main/LICENSE.md">License</a>
                </li>
                <li class="nav-item"><a class="nav-link"
                                        href="https://github.com/fsprojects/fantomas/blob/main/CHANGELOG.md">Release
                    Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/fantomas/">Source
                    Repository</a></li>
                <li class="nav-header " id="end-users">
    End-users
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GettingStarted.html" class="nav-link" > Getting Started
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/StyleGuide.html" class="nav-link" > Style guide
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/Configuration.html" class="nav-link" > Configuration
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/IgnoreFiles.html" class="nav-link" > Ignore Files
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/FormattingCheck.html" class="nav-link" > Formatting Check
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GitHooks.html" class="nav-link" > Git hooks
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/Rider.html" class="nav-link" > JetBrains Rider
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/VisualStudio.html" class="nav-link" > Visual Studio
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/VSCode.html" class="nav-link" > Visual Studio Code
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GeneratingCode.html" class="nav-link" > Generating source code
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/UpgradeGuide.html" class="nav-link" > Upgrade guide
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/FAQ.html" class="nav-link" > FAQ
</a></li>

</div>
<li class="nav-header active" id="contributors">
    Contributors
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Index.html" class="nav-link" > Contributors
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/FSharp.html" class="nav-link" > F#
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Getting Started.html" class="nav-link" > Getting started
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Solution Structure.html" class="nav-link" > Solution structure
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Transforming.html" class="nav-link" > Fantomas.Core overview (1)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Traverse.html" class="nav-link" > Fantomas.Core overview (2)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Formatted Code.html" class="nav-link" > Fantomas.Core overview (3)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Conditional Compilation Directives.html" class="nav-link" > Formatting Conditional Compilation Directives
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/How Can I Contribute.html" class="nav-link" > How can I contribute?
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/The Missing Comment.html" class="nav-link" > The Missing Comment
</a></li>

<li class="nav-item active"><a href="https://fsprojects.github.io/fantomas/docs/contributors/Multiple Times.html" class="nav-link" > Fantomas is trying to format the input multiple times due to the detection of multiple defines
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Pull request ground rules.html" class="nav-link" > Pull request ground rules
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Updating the compiler.html" class="nav-link" > Updating the compiler sources
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Releases.html" class="nav-link" > Releases
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Glossary.html" class="nav-link" > Glossary
</a></li>

</div>
                <li class="nav-header " id="api_reference">
    API Reference
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item active"><a href="https://fsprojects.github.io/fantomas/reference/index.html" class="nav-link" > All Namespaces</a></li>

</div>
            </ul>
        </div>
        <a href="https://fsprojects.github.io/fantomas/">
            <img alt="Header menu logo" src="https://fsprojects.github.io/fantomas/images/logo.png">
            <strong>fantomas</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/fsprojects/fantomas/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/fantomas/blob/main/LICENSE.md">License</a>
        </li>
        <li class="nav-item"><a class="nav-link"
                                href="https://github.com/fsprojects/fantomas/blob/main/CHANGELOG.md">Release
            Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/fantomas/">Source
            Repository</a></li>
        <li class="nav-header " id="end-users">
    End-users
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GettingStarted.html" class="nav-link" > Getting Started
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/StyleGuide.html" class="nav-link" > Style guide
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/Configuration.html" class="nav-link" > Configuration
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/IgnoreFiles.html" class="nav-link" > Ignore Files
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/FormattingCheck.html" class="nav-link" > Formatting Check
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GitHooks.html" class="nav-link" > Git hooks
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/Rider.html" class="nav-link" > JetBrains Rider
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/VisualStudio.html" class="nav-link" > Visual Studio
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/VSCode.html" class="nav-link" > Visual Studio Code
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/GeneratingCode.html" class="nav-link" > Generating source code
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/UpgradeGuide.html" class="nav-link" > Upgrade guide
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/end-users/FAQ.html" class="nav-link" > FAQ
</a></li>

</div>
<li class="nav-header active" id="contributors">
    Contributors
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Index.html" class="nav-link" > Contributors
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/FSharp.html" class="nav-link" > F#
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Getting Started.html" class="nav-link" > Getting started
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Solution Structure.html" class="nav-link" > Solution structure
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Transforming.html" class="nav-link" > Fantomas.Core overview (1)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Traverse.html" class="nav-link" > Fantomas.Core overview (2)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Formatted Code.html" class="nav-link" > Fantomas.Core overview (3)
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Conditional Compilation Directives.html" class="nav-link" > Formatting Conditional Compilation Directives
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/How Can I Contribute.html" class="nav-link" > How can I contribute?
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/The Missing Comment.html" class="nav-link" > The Missing Comment
</a></li>

<li class="nav-item active"><a href="https://fsprojects.github.io/fantomas/docs/contributors/Multiple Times.html" class="nav-link" > Fantomas is trying to format the input multiple times due to the detection of multiple defines
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Pull request ground rules.html" class="nav-link" > Pull request ground rules
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Updating the compiler.html" class="nav-link" > Updating the compiler sources
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Releases.html" class="nav-link" > Releases
</a></li>

<li class="nav-item "><a href="https://fsprojects.github.io/fantomas/docs/contributors/Glossary.html" class="nav-link" > Glossary
</a></li>

</div>
        <li class="nav-header " id="api_reference">
    API Reference
    <iconify-icon icon="fluent:chevron-up-24-regular" width="32" height="32" rotate="180deg"></iconify-icon>
</li>
<div class="menu-items">
    <li class="nav-item active"><a href="https://fsprojects.github.io/fantomas/reference/index.html" class="nav-link" > All Namespaces</a></li>

</div>
    </ul>
</aside>
<main>
    <div id="content">
        
<h1><a name="Fantomas-is-trying-to-format-the-input-multiple-times-due-to-the-detection-of-multiple-defines" class="anchor" href="#Fantomas-is-trying-to-format-the-input-multiple-times-due-to-the-detection-of-multiple-defines">Fantomas is trying to format the input multiple times due to the detection of multiple defines</a></h1>
<p>As explained in <a href="./Conditional%20Compilation%20Directives.html">Formatting Conditional Compilation Directives</a>, Fantomas will try to format the input multiple times if it detects multiple defines.<br />
The amount of conditional directives should be exactly the same in each pass. This is a requirement in order for Fantomas to merge the results into one.<br />
Unfortunately, this is not always the case and an exception will be thrown if the bookkeeping doesn't add up.</p>
<p>As a case-study, we will look at issue <a href="https://github.com/fsprojects/fantomas/issues/2844">#2844</a> and see how we troubleshoot these types of issues.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">FormatException</span><span class="pn">:</span> <span class="id">Fantomas</span> <span class="id">is</span> <span class="id">trying</span> <span class="k">to</span> <span class="id">format</span> <span class="id">the</span> <span class="id">input</span> <span class="id">multiple</span> <span class="id">times</span> <span class="id">due</span> <span class="k">to</span> <span class="id">the</span> <span class="id">detection</span> <span class="k">of</span> <span class="id">multiple</span> <span class="id">defines</span><span class="pn">.</span>
<span class="id">There</span> <span class="id">is</span> <span class="id">a</span> <span class="id">problem</span> <span class="k">with</span> <span class="id">merging</span> <span class="id">all</span> <span class="id">the</span> <span class="id">code</span> <span class="id">back</span> <span class="id">together</span><span class="pn">.</span>
<span class="pn">[</span><span class="pn">]</span> <span class="id">has</span> <span class="n">7</span> <span class="id">fragments</span>
<span class="pn">[</span><span class="id">IOS</span><span class="pn">]</span> <span class="id">has</span> <span class="n">9</span> <span class="id">fragments</span>
</code></pre>
<h2><a name="Isolate-each-define-combination" class="anchor" href="#Isolate-each-define-combination">Isolate each define combination</a></h2>
<p>The first step is to isolate each define combination in a unit test. Doing this will simplify the debugging process.<br />
The <code>formatSourceStringWithDefines</code> can be used to only format the input with a specific set of defines.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[&lt;</span><span class="id">Test</span><span class="pn">&gt;]</span>
<span class="k">let</span> <span class="id">``good unit test name, no defines``</span> <span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="id">formatSourceStringWithDefines</span>
        <span class="pn">[</span><span class="pn">]</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        program.SyncAction</span>
<span class="s">                            (</span>
<span class="s">#if IOS</span>
<span class="s">                            // iOS animates by default layout changes, we don&#39;t want that</span>
<span class="s">                            fun () -&gt; v</span>
<span class="s">#else</span>
<span class="s">                            fn</span>
<span class="s">#endif</span>
<span class="s">                        )</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="id">config</span>
    <span class="o">|&gt;</span> <span class="id">prepend</span> <span class="id">newline</span>
    <span class="o">|&gt;</span> <span class="id">should</span>
        <span class="id">equal</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">program.SyncAction(</span>
<span class="s">#if IOS</span>
<span class="s">#else</span>
<span class="s">    fn</span>
<span class="s">#endif</span>
<span class="s">)</span>
<span class="s">&quot;&quot;&quot;</span>
</code></pre>
<p>Notice that our result code should reflect only the active code branches.
<code>IOS</code> is not present and so no code is expected between <code>#if IOS</code> and <code>#else</code>.</p>
<p>If we do this for each combination, we can narrow the problem down to find the troublesome combination.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[&lt;</span><span class="id">Test</span><span class="pn">&gt;]</span>
<span class="k">let</span> <span class="id">``good unit test name, IOS``</span> <span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="id">formatSourceStringWithDefines</span>
        <span class="pn">[</span> <span class="s">&quot;IOS&quot;</span> <span class="pn">]</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        program.SyncAction</span>
<span class="s">                            (</span>
<span class="s">#if IOS</span>
<span class="s">                            // iOS animates by default layout changes, we don&#39;t want that</span>
<span class="s">                            fun () -&gt; v</span>
<span class="s">#else</span>
<span class="s">                            fn</span>
<span class="s">#endif</span>
<span class="s">                        )</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="id">config</span>
    <span class="o">|&gt;</span> <span class="id">prepend</span> <span class="id">newline</span>
    <span class="o">|&gt;</span> <span class="k">fun</span> <span class="id">r</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">printfn</span> <span class="s">&quot;%s&quot;</span> <span class="id">r</span>
        <span class="id">r</span>
    <span class="o">|&gt;</span> <span class="id">should</span>
        <span class="id">equal</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">program.SyncAction</span>
<span class="s">    (</span>
<span class="s">#if IOS</span>
<span class="s">    // iOS animates by default layout changes, we don&#39;t want that</span>
<span class="s">    fun () -&gt; v</span>
<span class="s">#else</span>
<span class="s">#endif</span>
<span class="s">    )</span>
<span class="s">&quot;&quot;&quot;</span>
</code></pre>
<p><img src="../../images/multiple-times-test-explorer.png" alt="Result in test explorer" /></p>
<h2><a name="Bringing-it-all-together" class="anchor" href="#Bringing-it-all-together">Bringing it all together</a></h2>
<p>If each combination is fixed, we can now try to format the input with all the defines.<br />
Notice that we use <code>formatSourceString</code> instead of <code>formatSourceStringWithDefines</code> here.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[&lt;</span><span class="id">Test</span><span class="pn">&gt;]</span>
<span class="k">let</span> <span class="id">``good unit test name, 2844``</span> <span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="id">formatSourceString</span>
        <span class="k">false</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        program.SyncAction</span>
<span class="s">                            (</span>
<span class="s">#if IOS</span>
<span class="s">                            // iOS animates by default layout changes, we don&#39;t want that</span>
<span class="s">                            fun () -&gt; v</span>
<span class="s">#else</span>
<span class="s">                            fn</span>
<span class="s">#endif</span>
<span class="s">                        )</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="id">config</span>
    <span class="o">|&gt;</span> <span class="id">prepend</span> <span class="id">newline</span>
    <span class="o">|&gt;</span> <span class="id">should</span>
        <span class="id">equal</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">program.SyncAction</span>
<span class="s">    (</span>
<span class="s">#if IOS</span>
<span class="s">    // iOS animates by default layout changes, we don&#39;t want that</span>
<span class="s">    fun () -&gt; v</span>
<span class="s">#else</span>
<span class="s">    fn</span>
<span class="s">#endif</span>
<span class="s">    )</span>
<span class="s">&quot;&quot;&quot;</span>
</code></pre>
<h2><a name="Unit-test-naming-conventions" class="anchor" href="#Unit-test-naming-conventions">Unit test naming conventions</a></h2>
<p>When dealing with multiple defines, it is important to name the unit tests in a way that makes it easy to understand what is going on.<br />
Use the following naming convention suffix:</p>
<ul>
<li><code>, no defines</code> for the <code>[]</code> case</li>
<li><code>, defineA defineB</code> for the <code>[ "defineA"; "defineB" ]</code> case</li>
<li><code>, issue-number</code> for the full test.</li>
</ul>
<fantomas-nav previous="The%20Missing%20Comment.html" next="Pull%20request%20ground%20rules.html"></fantomas-nav>

        <div class="fsdocs-tip" id="fs1">namespace System</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />type FormatException =
  inherit SystemException
  new: unit -&gt; unit + 2 overloads<br /><em>&lt;summary&gt;The exception that is thrown when the format of an argument is invalid, or when a composite format string is not well formed.&lt;/summary&gt;</em><br /><br />--------------------<br />System.FormatException() : System.FormatException<br />System.FormatException(message: string) : System.FormatException<br />System.FormatException(message: string, innerException: exn) : System.FormatException</div>
<div class="fsdocs-tip" id="fs3">val printfn: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Fantomas-is-trying-to-format-the-input-multiple-times-due-to-the-detection-of-multiple-defines">
      Fantomas is trying to format the input multiple times due to the detection of multiple defines
    </a>
  </li>
  <li class="level-2">
    <a href="#Isolate-each-define-combination">
      Isolate each define combination
    </a>
  </li>
  <li class="level-2">
    <a href="#Bringing-it-all-together">
      Bringing it all together
    </a>
  </li>
  <li class="level-2">
    <a href="#Unit-test-naming-conventions">
      Unit test naming conventions
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="https://fsprojects.github.io/fantomas/content/fsdocs-tips.js"></script>
<script type="module" src="https://fsprojects.github.io/fantomas/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="https://fsprojects.github.io/fantomas/content/fsdocs-theme.js"></script>
<script type="module" src="https://fsprojects.github.io/fantomas/content/fsdocs-search.js"></script>
<script type="module">
    import mermaid from "https://esm.sh/mermaid@9.2.2";
    mermaid.initialize({
        startOnLoad: true,
        theme: "base",
        themeVariables: {
            primaryColor: '#338cbb',
            primaryTextColor: '#FFF',
            primaryBorderColor: '#5aacd6'
        }
    });

    const menuHeaders = [...document.querySelectorAll(".nav-header")].filter(nh => nh.id);
    menuHeaders.forEach(nv => {
        nv.addEventListener("click", () => {
            nv.classList.toggle("active");
        })
    })
</script>
<script type="module" src="https://fsprojects.github.io/fantomas/content/webcomponents.js"></script>
</body>
</html>